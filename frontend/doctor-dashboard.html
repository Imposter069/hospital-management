<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Doctor Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: #eef3ff;
      font-family: 'Poppins', sans-serif;
      padding-top: 70px;
    }
    .navbar {
      background-color: #0d6efd;
    }
    .navbar-brand, .nav-link, .dropdown-item {
      color: white !important;
    }
    .dropdown-item:hover {
      background-color: #e9ecef;
      color: #000 !important;
    }
    .profile-img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      cursor: pointer;
      border: 2px solid white;
    }
    .card {
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    .patient-details {
      display: none;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" href="#">ðŸ©º Doctor Dashboard</a>
      <div class="dropdown ms-auto">
        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" id="doctorProfileImg" class="profile-img dropdown-toggle" data-bs-toggle="dropdown">
        <ul class="dropdown-menu dropdown-menu-end mt-2">
          <li><h6 class="dropdown-header" id="doctorNameMenu">Dr. Demo</h6></li>
          <li><span class="dropdown-item-text" id="doctorSpecializationMenu">Cardiologist</span></li>
          <li><hr class="dropdown-divider"></li>
          <li><button class="dropdown-item" id="viewProfileBtn">View Profile</button></li>
          <li><button class="dropdown-item" id="changePasswordBtn">Change Password</button></li>
          <li><button class="dropdown-item text-danger" id="logoutBtn">Logout</button></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="container mt-4">
    <!-- Doctor Info Card -->
    <div class="card p-3 mb-4" id="doctorInfoCard">
      <h4>Welcome, <span id="doctorName">Dr. Demo</span></h4>
      <p><strong>Specialization:</strong> <span id="doctorSpecialization">Cardiologist</span></p>
      <p><strong>Email:</strong> <span id="doctorEmail">demo@hospital.com</span></p>
      <p><strong>Availability:</strong> <span id="doctorAvailability">Mon - Fri (10 AM - 4 PM)</span></p>
    </div>

    <!-- Appointments Section -->
    <div class="card p-3">
      <h4>Appointments</h4>
      <table class="table table-bordered" id="appointmentsTable">
        <thead>
          <tr>
            <th>Patient Name</th>
            <th>Date</th>
            <th>Time</th>
            <th>View</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>John Doe</td>
            <td>2025-11-04</td>
            <td>10:30 AM</td>
            <td><button class="btn btn-sm btn-primary view-btn" data-patient="John Doe">View</button></td>
          </tr>
          <tr>
            <td>Jane Smith</td>
            <td>2025-11-05</td>
            <td>12:00 PM</td>
            <td><button class="btn btn-sm btn-primary view-btn" data-patient="Jane Smith">View</button></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Patient Detail + Prescription -->
    <div class="card p-3 patient-details" id="patientDetails">
      <h4 id="patientName"></h4>
      <p><strong>Age:</strong> <span id="patientAge">-</span></p>
      <p><strong>Symptoms:</strong> <span id="patientSymptoms">-</span></p>

      <h5 class="mt-3">Prescribe Medicines</h5>
      <textarea id="prescriptionText" class="form-control mb-3" rows="3" placeholder="Write prescription..."></textarea>
      <button id="savePrescriptionBtn" class="btn btn-success">Save Prescription</button>
      <button id="backBtn" class="btn btn-secondary ms-2">Back</button>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Mock doctor data (later from backend)
    const doctorData = {
      name: "Dr. Demo",
      specialization: "Cardiologist",
      email: "demo@hospital.com",
      availability: "Mon - Fri (10 AM - 4 PM)",
      photo: "https://cdn-icons-png.flaticon.com/512/3135/3135715.png"
    };

    // Display doctor data
    document.getElementById('doctorName').innerText = doctorData.name;
    document.getElementById('doctorSpecialization').innerText = doctorData.specialization;
    document.getElementById('doctorEmail').innerText = doctorData.email;
    document.getElementById('doctorAvailability').innerText = doctorData.availability;
    document.getElementById('doctorProfileImg').src = doctorData.photo;
    document.getElementById('doctorNameMenu').innerText = doctorData.name;
    document.getElementById('doctorSpecializationMenu').innerText = doctorData.specialization;

    // Handle appointments
    const viewButtons = document.querySelectorAll('.view-btn');
    const patientSection = document.getElementById('patientDetails');
    const appointmentsTable = document.getElementById('appointmentsTable');
    const patientNameEl = document.getElementById('patientName');
    const prescriptionText = document.getElementById('prescriptionText');

    viewButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const name = btn.getAttribute('data-patient');
        patientNameEl.textContent = name;
        document.getElementById('patientAge').textContent = '30';
        document.getElementById('patientSymptoms').textContent = 'Fever and cough';
        appointmentsTable.parentElement.style.display = 'none';
        patientSection.style.display = 'block';
      });
    });

    document.getElementById('backBtn').addEventListener('click', () => {
      patientSection.style.display = 'none';
      appointmentsTable.parentElement.style.display = 'block';
    });

    document.getElementById('savePrescriptionBtn').addEventListener('click', async () => {
      const patientName = patientNameEl.textContent;
      const prescription = prescriptionText.value;
      if (!prescription.trim()) return alert('Please enter a prescription!');
      alert(`Prescription saved for ${patientName}!`);
      prescriptionText.value = '';
      patientSection.style.display = 'none';
      appointmentsTable.parentElement.style.display = 'block';
    });

    // Dropdown button actions
    document.getElementById('logoutBtn').addEventListener('click', () => {
      if (confirm('Are you sure you want to logout?')) {
        window.location.href = 'doctor.html';
      }
    });

    document.getElementById('viewProfileBtn').addEventListener('click', () => {
      alert(`ðŸ‘¨â€âš•ï¸ ${doctorData.name}\n${doctorData.specialization}\n${doctorData.email}`);
    });

    document.getElementById('changePasswordBtn').addEventListener('click', () => {
      const newPass = prompt("Enter new password:");
      if(newPass) alert("Password changed successfully (mock)");
    });
  </script>
</body>
</html>
