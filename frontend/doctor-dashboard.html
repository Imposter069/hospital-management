<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Doctor Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: #eef3ff;
      font-family: 'Poppins', sans-serif;
      padding: 30px;
    }
    .card {
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    .patient-details {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2 class="text-center mb-4">üë®‚Äç‚öïÔ∏è Doctor Dashboard</h2>

    <!-- Appointment Section -->
    <div class="card p-3">
      <h4>Appointments</h4>
      <table class="table table-bordered" id="appointmentsTable">
        <thead>
          <tr>
            <th>Patient Name</th>
            <th>Date</th>
            <th>Time</th>
            <th>View</th>
          </tr>
        </thead>
        <tbody>
          <!-- Example Data -->
          <tr>
            <td>John Doe</td>
            <td>2025-11-04</td>
            <td>10:30 AM</td>
            <td><button class="btn btn-sm btn-primary view-btn" data-patient="John Doe">View</button></td>
          </tr>
          <tr>
            <td>Jane Smith</td>
            <td>2025-11-05</td>
            <td>12:00 PM</td>
            <td><button class="btn btn-sm btn-primary view-btn" data-patient="Jane Smith">View</button></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Patient Detail + Prescription -->
    <div class="card p-3 patient-details" id="patientDetails">
      <h4 id="patientName"></h4>
      <p><strong>Age:</strong> <span id="patientAge">-</span></p>
      <p><strong>Symptoms:</strong> <span id="patientSymptoms">-</span></p>

      <h5 class="mt-3">Prescribe Medicines</h5>
      <textarea id="prescriptionText" class="form-control mb-3" rows="3" placeholder="Write prescription..."></textarea>
      <button id="savePrescriptionBtn" class="btn btn-success">Save Prescription</button>
      <button id="backBtn" class="btn btn-secondary ms-2">Back</button>
    </div>
  </div>

  <script>
    const viewButtons = document.querySelectorAll('.view-btn');
    const patientSection = document.getElementById('patientDetails');
    const appointmentsTable = document.getElementById('appointmentsTable');
    const patientNameEl = document.getElementById('patientName');
    const prescriptionText = document.getElementById('prescriptionText');

    viewButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const name = btn.getAttribute('data-patient');
        // Show patient details
        patientNameEl.textContent = name;
        document.getElementById('patientAge').textContent = '30'; // Example data
        document.getElementById('patientSymptoms').textContent = 'Fever and cough';
        appointmentsTable.parentElement.style.display = 'none';
        patientSection.style.display = 'block';
      });
    });

    document.getElementById('backBtn').addEventListener('click', () => {
      patientSection.style.display = 'none';
      appointmentsTable.parentElement.style.display = 'block';
    });

    document.getElementById('savePrescriptionBtn').addEventListener('click', async () => {
      const patientName = patientNameEl.textContent;
      const prescription = prescriptionText.value;
      if (!prescription.trim()) {
        alert('Please enter a prescription!');
        return;
      }

      // Later connect with MongoDB backend
      /*
      await fetch('http://localhost:5000/doctor/prescription', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({ patientName, prescription })
      });
      */
      alert(`Prescription saved for ${patientName}!`);
      prescriptionText.value = '';
      patientSection.style.display = 'none';
      appointmentsTable.parentElement.style.display = 'block';
    });
  </script>
</body>
</html>
